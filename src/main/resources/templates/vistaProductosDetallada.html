<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
	
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="./../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body class="d-flex flex-column justify-content-between min-vh-100">
	
	<div sec:authorize="hasRole('ROLE_USER')">
			<nav th:replace="~{fragmentos/userNavbar::userNavbar}"></nav>
		</div>
		<div sec:authorize="hasRole('ROLE_ADMIN')">
			<nav th:replace="~{fragmentos/adminNavbar::adminNavbar}"></nav>
		</div>
		<div sec:authorize="!isAuthenticated()">
			<nav th:replace="~{fragmentos/navbar::navbar}"></nav>
		</div>
	
	<div class="card bg-secondary mb-3 mx-auto shadow-lg w-50">
		        <div class="card-header" th:text="${producto.nombre}">Producto</div>
		        <div class="card-body row">
					<div class="col-6 border-right">
						<img th:src="@{${producto.imagen}}" class="card-img-top" alt="Imagen del Producto">
						<p th:text="${producto.descripcion}" class="card-text"></p>
					</div>
					<div class="col-6">
						<h2 class="row" th:text"${#numbers.formatDecimal(producto.precioVenta, 1, 2,'COMMA')}">Precio</h2>
						<form class="row" id="seleccionVariantes" th:action="@{/portada}" th:object="${producto}" method="post">
							<div class="row">
								<label for="colores"><strong>Colores</strong></label>
								<div class="col-3 form-check form-check-inline" th:each="color : ${colores}">
									<input class="form-check-input" type="checkbox" th:id="${'color_' + color.id}" th:value="${color.id}" th:field="*{colores}" />
									<label class="form-check-label" th:for="${'color_' + color.id}" th:text="${color.nombre}"></label>
								</div>
							</div>
							<div class="row">
								<label for="tallas"><strong>Tallas</strong></label>
								<div class="col-3 form-check form-check-inline" th:each="talla : ${tallas}">
									<input class="form-check-input" type="checkbox" th:id="${'talla_' + talla.id}" th:value="${talla.id}" th:field="*{tallas}" />
									<label class="form-check-label" th:for="${'talla_' + talla.id}" th:text="${talla.nombre}"></label>
								</div>
							</div>
							<button type="submit" class="btn btn-success shadow-lg col-12">Comprar</button>
						</form>
					</div>
		        </div>
		    </div>
			
	<footer th:replace="~{fragmentos/footer::footer}"></footer>
	
</body>

<script>
	
	document.addEventListener("DOMContentLoaded", function() {
	    const checkboxesColores = document.querySelectorAll('input[type="checkbox"][name="colores"]');
	    const checkboxesTallas = document.querySelectorAll('input[type="checkbox"][name="tallas"]');
	
	    checkboxesColores.forEach(function(checkbox) {
	        checkbox.addEventListener('change', function() {
	            checkboxesColores.forEach(function(currentCheckbox) {
	                if (currentCheckbox !== checkbox) {
	                    currentCheckbox.checked = false;
	                }
	            });
	        });
	    });
	
	    checkboxesTallas.forEach(function(checkbox) {
	        checkbox.addEventListener('change', function() {
	            checkboxesTallas.forEach(function(currentCheckbox) {
	                if (currentCheckbox !== checkbox) {
	                    currentCheckbox.checked = false;
	                }
	            });
	        });
	    });
	});
	
	function desmarcarCheckboxes() {
	       checkboxesColores.forEach(function(checkbox) {
	           checkbox.checked = false;
	       });
	       checkboxesTallas.forEach(function(checkbox) {
	           checkbox.checked = false;
	       });
	   }
	
	desmarcarCheckboxes();
	
</script>